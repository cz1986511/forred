<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta content="IE=edge" http-equiv="X-UA-Compatible">
        <meta content="width=device-width, initial-scale=1.0,user-scalable=no" name="viewport">
        <title>xiaozhuo.info</title>
        <script src="echarts.min.js"></script>
        <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    </head>
    <body>
    <div id="day" style="width: 600px;height:400px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var dayChart = echarts.init(document.getElementById('day'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '日消费'
            },
            tooltip: {},
            legend: {
                data:['日消费']
            },
            xAxis: {
                data: []
            },
            yAxis: {},
            series: [{
                name: '日消费',
                type: 'bar',
                data: []
            }]
        };
        function fetchData(reqData) {
        // 通过 setTimeout 模拟异步加载
          $.ajax({
              type: 'post',
              dataType: 'json',
              url: 'http://xiaozhuo.info/api/consume/data',
              data: reqData,
              success: function(data) {
                if (data.data) {
                  console.log(data.data.dayNum);
                };                              
              },
              error: function() {
              }
          }); 
        }
        dayChart.showLoading();
        fetchData(function (data) {
          dayChart.hideLoading();
          dayChart.setOption({
            xAxis: {
              data: data.data.dayNum
            },
            series: [{
            // 根据名字对应到相应的系列
            name: '日消费',
            data: data.data.dataData
          }]
        });
        });

    </script>
    </body>
</html>
